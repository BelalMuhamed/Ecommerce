<h1 class="h2 text-main">Register Now !</h1>
<form [formGroup]="registerform" (ngSubmit)="RegisterSubmit()">
    <div class="my-2">
        <label for="name" >  Name</label>
        <input id ="name" type="text" class="form-control" formControlName="name"[ngClass]="
        {
            'is-valid':!registerform.get('name')?.errors  && (registerform.get('name')?.touched || registerform.get('name')?.dirty),
            'is-invalid':registerform.get('name')?.errors  && (registerform.get('name')?.touched || registerform.get('name')?.dirty)
        }"/>
        @if (registerform.get('name')?.errors  && (registerform.get('name')?.touched || registerform.get('name')?.dirty)) 
        {
            <div class="alert alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary">
            @if(registerform.get('name')?.getError('required'))
            {
                    <p class="m-0 text-danger"> Name is required !</p>
            }
            @else if(registerform.get('name')?.getError('minlength'))
            {
                    <p class="m-0 text-danger"> minimum Characters count are 3 !</p>
            }
            @else if(registerform.get('name')?.getError('maxlength'))
            {
                    <p class="m-0 text-danger"> MAximum Characters count are 30 !</p>
            }
        </div>
            
        }
        
    </div>
    <div class="my-2">
        <label for="email" > Email</label>
        <input id ="email" type="email" class="form-control"formControlName="email"
        [ngClass]="
        {
            'is-valid':!registerform.get('email')?.errors  && (registerform.get('email')?.touched || registerform.get('email')?.dirty),
            'is-invalid':registerform.get('email')?.errors  && (registerform.get('email')?.touched || registerform.get('email')?.dirty)
        }"/>
        @if (registerform.get('email')?.errors  && (registerform.get('email')?.touched || registerform.get('email')?.dirty)) 
        {
            <div class="alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary">
            @if(registerform.get('email')?.getError('required'))
            {
                    <p class="m-0 text-danger"> email is required !</p>
            }
            @else if(registerform.get('email')?.getError('email'))
            {
                    <p class="m-0 text-danger"> please enter valid email address!</p>
            }
          
        </div>
            
        }
    </div>
   
    <div class="my-2">
        <label for="password" >  password</label>
        <input id ="password" type="password" class="form-control"formControlName="password"
        [ngClass]="
        {
            'is-valid':!registerform.get('password')?.errors  && (registerform.get('password')?.touched || registerform.get('password')?.dirty),
            'is-invalid':registerform.get('password')?.errors  && (registerform.get('password')?.touched || registerform.get('password')?.dirty)
        }"/>
        @if (registerform.get('password')?.errors  && (registerform.get('password')?.touched || registerform.get('name')?.dirty)) 
        {
            <div class="alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary">
            @if(registerform.get('password')?.getError('required'))
            {
                    <p class="m-0 text-danger"> password is required !</p>
            }
            @else if(registerform.get('password')?.getError('pattern'))
            {
                    <p class="m-0 text-danger"> password must be at least 6 charchters </p>
            }
          
        </div>
            
        }
    </div>
    <div class="my-2">
        <label for="rePassword" >  rePassword</label>
        <input id ="rePassword" type="password" class="form-control"formControlName="rePassword"
        [ngClass]="
        {
            'is-valid':!registerform.get('rePassword')?.errors && (registerform.get('rePassword')?.touched || registerform.get('rePassword')?.dirty),
            'is-invalid':registerform.get('rePassword')?.errors && (registerform.get('rePassword')?.touched || registerform.get('rePassword')?.dirty)
        }"/>
        @if (registerform.get('rePassword')?.errors && (registerform.get('rePassword')?.touched || registerform.get('rePassword')?.dirty)) 
        {
            <div class="alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary">
      
                    <p class="m-0 text-danger"> Dosen't match with password</p>
           
        </div>
        }
    </div>
    <div class="my-2">
        <label for="phone" >  phone</label>
        <input id ="phone" type="text" class="form-control"formControlName="phone"
        [ngClass]="
        {
            'is-valid':!registerform.get('phone')?.errors  && (registerform.get('phone')?.touched || registerform.get('phone')?.dirty),
            'is-invalid':registerform.get('phone')?.errors  && (registerform.get('phone')?.touched || registerform.get('phone')?.dirty)
        }"/>
        @if (registerform.get('phone')?.errors  && (registerform.get('phone')?.touched || registerform.get('phone')?.dirty)) 
        {
            <div class="alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary">
        @if(registerform.get('phone')?.getError('required'))
            {
                    <p class="m-0 text-danger"> phone is required !</p>
            }
            @else if(registerform.get('phone')?.getError('pattern'))
            {
                    <p class="m-0 text-danger"> like this 010123456789  (11 digit) !</p>
            }
        </div>
        }
    </div>
    @if (msgerror)
    {
        <div class="alert alert-danger w-25 mt-3 border-1 border-danger bg-body-tertiary d-block mt-0">
            <p>{{msgerror}}</p>
        </div>
    }
    <button [disabled]="registerform.invalid ||isloading" class="btn-main d-block ms-auto mt-4" type="submit">
        @if (isloading) {<span><i class="fas fa-spin fa-spinner"></i></span>}
        Register
        </button>
    
</form>